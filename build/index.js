'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.default=function(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var state=arguments[1];return Right({config:config,state:state}).flatMap(handleMissingState).map(maybeExtendConfig).map(removeStates).cata(throwError,returnValue);};var _monet=require('monet');var Left=_monet.Either.Left,Right=_monet.Either.Right;function extendConfig(config,state){return{config:_extends({},config,config._states[state]),state:state};}function throwError(e){throw e;}function returnValue(result){return result;}function removeStates(args){var config=args.config;delete config._states;return config;}function maybeExtendConfig(args){var config=args.config,state=args.state;return state?extendConfig(config,state):{config:config,state:state};}function handleMissingState(args){var config=args.config,state=args.state;return state&&(!config._states||!config._states[state])?Left(new Error('State \''+state+'\' is not defined.')):Right({config:config,state:state});}